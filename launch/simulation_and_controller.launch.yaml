launch:

- include:
    file: "$(find-pkg-share turtlebot3_gazebo)/launch/turtlebot3_dqn_stage1.launch.py"

- node:
    pkg: "mouse_teleop"
    exec: "mouse_teleop"
    remap:
    - {from: "mouse_vel", to: "cmd_vel_ref"}
    param:
    - {name: "scale", value: 0.5}

# - node:
#     pkg: "collision_avoidance_2dl_cbf"
#     exec: "collision_avoidance_2dl_cbf_node"
#     remap:
#     - {from: "/scan", to: "/scan"}
#     - {from: "/cmd_vel_in", to: "/cmd_vel_ref"}
#     - {from: "/cmd_vel_out", to: "/cmd_vel"}
#     param:
#     - {name: "base_frame", value: "base_link"}
#     - {name: "scan_frame", value: "base_scan"}
#     - {name: "gamma", value: 0.1}

# - node:
#     pkg: "collision_avoidance_2dl_cbf"
#     exec: "publish_collision_polygon_node"
#     param:
#     - {name: "base_frame_id", value: "base_link"}
#     - {name: "collision_polygon", value: [0.21, 0.085, -0.11, 0.085, -0.22, -0.34, -0.03, -0.34, 0.21, -0.085]}
#     # - {name: "collision_polygon", value: [0.3, 0.3, -0.3, 0.3, -0.3, -0.3, 0.3, -0.3]}

- node:
    pkg: rviz2
    exec: rviz2
    args: "-d $(find-pkg-share collision_avoidance_2dl_cbf)/config/turtlebot3.rviz"
    param:
    - {name: "use_sim_time", value: true}
